<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* #main {
            background: #ccc;
        } */
    </style>
</head>

<body>
    <button onclick="cl()">点击运行</button>
    <button onclick="ce()">创建元素</button>
    <button onclick="generator()">生成配置文件</button>

    <input type="file" id=file onchange="filechange(this)" />
    <div id="main">

    </div>
    <script src="https://unpkg.com/requirejs@2.3.6/require.js"></script>
    <script>
        function filechange(e) {
            console.log(e.files[0])
            let url = URL.createObjectURL(e.files[0])
            let img = new Image()
            img.src = url
            img.onload=()=>{
                fileInfo = {
                Img: img,
                sx: 0,
                sy: 0,
                w: img.width,
                h: img.height
            }
            var info = {
                Vx: 0,
                Vy: 0,
                w: 850,
                h: 480,
                x: 100,
                y: 100,
                spiteInfo:fileInfo
            }

            var b = newBoard.createElement("spite", info)
            newBoard.push(b)
            }
           
        }
        var newBoard = null;
        require(["./dist/engin/engin.js"], function (canvas2d) {
            console.log(canvas2d)
            newBoard = new canvas2d.default("main", 2300, 700)
            // var newBoard={}
            var b = newBoard.createElement("spite", info2)
            console.log(b)
            newBoard.push(b)

            // console.log(temp)
            // }
            console.log(newBoard)
        })
        var img = new Image()
        var img1 = new Image()

        img.src = "./src/sprite/firepsd.png"
        img1.src = "./src/sprite/script0.png"


        var spite = {
            Img: img,
            sx: 200,
            sy: 500,
            w: 100,
            h: 100,
        }
        var info = {
            Vx: 0,
            Vy: 0,
            w: 100,
            h: 200,
            text: "一二三五",
            fontSize: 20,
            fontFamily:"楷体",
            fontWidth:1000,
            borderWidth:10,
            borderColor:"#0f0",
            bordered: true,
            color:"#e00",
            textAlign:"left",
            background:"#0ee",
            autoFeed: true
        }
        var info2 = {
            x: 100,
            y: 100,
            w: 100,
            h: 100,
            spiteInfo: spite
        }
        var enemyShip0 = {
            Img: img1,
            sx: 400,
            sy: 300,
            w: 200,
            h: 300
        }
        function ce() {
            var b = newBoard.createElement("text", info)
            newBoard.push(b)
        }
        function generator(){
            newBoard.getElementToJson()
        }
        var cl = function () {
            newBoard.loop()
            newBoard.enableClickEventLisener()
            newBoard.enableKeyupEventLisener()
            window.setTimeout(() => {
                newBoard.gameBoard[0].focused = false
            }, 1000)
        }
    </script>
</body>

</html>